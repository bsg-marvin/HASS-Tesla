title: SONIC
views:
  - title: Sonic
    path: sonic
    background: var(--lovelace-background,var(--primary-background-color));
    icon: mdi:ev-plug-tesla
    type: custom:vertical-layout
    width: 800
    max_cols: 1
    layout:
      max_cols: 1
      max_width: 640
    theme: Github Light Theme
    badges: []
    cards:
      - type: custom:simple-weather-card
        entity: weather.openweathermap_forecast
        name: ' at the moment!'
        secondary_info:
          - precipitation_probability
          - humidity
        primary_info:
          - wind_speed
          - wind_bearing
        style: |
          ha-card {
            background-color: transparent;
            border: none;
            box-shadow: none;
            padding-left: 40px !important;
            padding-right: 40px !important;
          }
      - type: custom:gap-card
        height: 1
      - type: horizontal-stack
        cards:
          - type: horizontal-stack
            cards:
              - type: entity
                entity: sensor.sonic_battery
                icon: ' '
                name: ' '
                state_color: false
                unit: null
                style: |
                  ha-card {
                    text-align: right;
                    background-color: transparent;
                    border: none;
                    box-shadow: none;
                  }
              - type: custom:banner-card
                heading: null
                color: white
                card_mod:
                  style: |
                    ha-card {
                      font-size: 10px;
                      {% set battery_level = states('sensor.sonic_battery')|float %}
                      {% if battery_level <= 25 %}
                        background: linear-gradient(to right, rgba(139, 0, 0, 0.6), rgba(255, 0, 0, 0.6)) 0% 0% / {{ battery_level }}% 100% no-repeat;
                      {% elif battery_level >= 26 and battery_level <= 60 %}
                        background: linear-gradient(to right, rgba(255, 165, 0, 0.6), rgba(255, 69, 0, 0.6)) 0% 0% / {{ battery_level }}% 100% no-repeat;
                      {% else %}
                        background: linear-gradient(to right, rgba(154, 205, 50, 0.6), rgba(34, 139, 34, 0.6)) 0% 0% / {{ battery_level }}% 100% no-repeat;
                      {% endif %}
                      width: 100%;
                      height: 20%;
                      top: 50%;
                      position: relative;
                      overflow: hidden;
                      border: 1px solid rgba(200, 200, 200, 0.1);
                      border-radius: 20px;
                      box-shadow: none;
                    }
              - type: entity
                entity: sensor.sonic_range
                value_template: |
                  {{ states('sensor.sonic_range')|float|round(0) }}
                icon: ' '
                name: ' '
                state_color: false
                unit: Km
                style: |
                  ha-card {
                    background-color: transparent;
                    border: none;
                    box-shadow: none;
                  }
      - type: horizontal-stack
        cards:
          - type: custom:mushroom-template-card
            entity: climate.sonic_hvac_climate_system
            icon: mdi:air-conditioner
            icon_color: |
              {% if is_state('climate.sonic_hvac_climate_system', 'off') %}
                grey
              {% else %}
                red
              {% endif %}
            hold_action:
              action: none
            tap_action:
              action: toggle
            double_tap_action:
              action: none
            secondary: CLIMATE
            layout: vertical
            fill_container: true
            multiline_secondary: false
            background: rgba(35, 71, 163, 0.8)
            card_mod: null
            style: |
              ha-card {
                background-color: transparent;
                border: none;
                box-shadow: none;
              }
          - type: entity
            entity: sensor.sonic_temperature_inside
            state_color: false
            icon: mdi:temperature-celsius
            name: CAR
            unit: ' '
            style: |
              ha-card {
                text-align: center;
                background-color: transparent;
                border: none;
                box-shadow: none;
              }
              .header {
                justify-content: space-evenly !important;
              }
          - type: entity
            entity: sensor.sonic_temperature_outside
            state_color: false
            name: OUT
            unit: ' '
            icon: mdi:temperature-celsius
            style: |
              ha-card {
                text-align: center;
                background-color: transparent;
                border: none;
                box-shadow: none;
              }
              .header {
                justify-content: space-evenly !important;
              }
          - type: custom:mushroom-template-card
            entity: select.sonic_heated_seat_right
            icon: mdi:car-seat-heater
            icon_color: |
              {% if is_state('select.sonic_heated_seat_right', 'Off') %}
                grey
              {% elif is_state('select.sonic_heated_seat_right', 'Auto') %}
                green
              {% elif is_state('select.sonic_heated_seat_right', 'Low') %}
                yellow
              {% elif is_state('select.sonic_heated_seat_right', 'Medium') %}
                orange
              {% else %}
                red
              {% endif %}
            tap_action:
              action: more-info
            hold_action:
              action: none
            double_tap_action:
              action: none
            secondary: DRIVER SEAT
            layout: vertical
            fill_container: true
            multiline_secondary: false
            background: rgba(35, 71, 163, 0.8)
            card_mod: null
            style: |
              ha-card {
                background-color: transparent;
                border: none;
                box-shadow: none;
              }
      - type: horizontal-stack
        cards:
          - type: custom:gap-card
          - type: custom:gap-card
          - type: custom:mushroom-template-card
            icon: mdi:car
            icon_color: |
              {% if is_state('cover.sonic_frunk', 'on') %}
                ''
              {% else %}
                grey
              {% endif %}
            layout: vertical
            fill_container: true
            entity: cover.sonic_frunk
            primary: ''
            secondary: FRUNK
            badge_color: ''
            style: |
              ha-card {
                background-color: transparent;
                border: none;
                box-shadow: none;
              }
          - type: custom:gap-card
          - type: custom:gap-card
      - type: horizontal-stack
        cards:
          - type: vertical-stack
            cards:
              - type: custom:mushroom-template-card
                icon: mdi:camera-enhance
                icon_color: |
                  {% if is_state('switch.sonic_sentry_mode', 'on') %}
                    red
                  {% else %}
                    grey
                  {% endif %}
                layout: vertical
                fill_container: true
                entity: switch.sonic_sentry_mode
                primary: ''
                secondary: SENTRY
                badge_color: ''
                style: |
                  ha-card {
                    background-color: transparent;
                    border: none;
                    box-shadow: none;
                  }
              - type: custom:gap-card
                height: 85
              - type: custom:mushroom-template-card
                icon: |
                  {% if is_state('binary_sensor.sonic_charging', 'on') %}
                    {{ states.sensor.sonic_battery.attributes.icon }}
                  {% else %}
                    mdi:ev-plug-ccs2
                  {% endif %}
                icon_color: |
                  {% if is_state('binary_sensor.sonic_charging', 'on') %}
                    green
                  {% else %}
                    {% if is_state('cover.sonic_charger_door', 'open') %}
                      red
                    {% else %}
                      grey
                    {% endif %}
                  {% endif %}
                layout: vertical
                fill_container: true
                entity: cover.sonic_charger_door
                primary: ''
                secondary: |
                  {% if is_state('binary_sensor.sonic_charging', 'on') %}
                    CHARGING
                  {% else %}
                    BUTHOLE
                  {% endif %}
                badge_color: ''
                style: |
                  ha-card {
                    position: relative;
                    background-color: transparent;
                    border: none;
                    box-shadow: none;
                    border-radius: 4px;
                    padding: 0px;
                    overflow: hidden;
                  }
                  ha-card::before {
                    content: "";
                    position: absolute;
                    top: 90px;
                    left: 0;
                    height: 10%;
                    width: 0;
                    border-radius: 4px;
                    background-color: rgba(4, 93, 0, 0.6);
                    animation: {% if is_state('binary_sensor.sonic_charging', 'on') %} charge 15s linear infinite{% endif %};
                  }
                  @keyframes charge {
                    0% { width: 0; }
                    100% { width: calc(({{ states('sensor.sonic_battery') }} / 100) * 100%); }
                  }
          - type: vertical-stack
            cards:
              - type: custom:button-card
                entity: button.sonic_force_data_update
                icon: none
                name: ' '
                aspect_ratio: 1/1.8
                tap_action:
                  action: call-service
                  service: button.press
                  service_data:
                    entity_id: button.sonic_force_data_update
                hold_action:
                  action: more-info
                variables:
                  cover_img: |
                    [[[
                      if (states["binary_sensor.sonic_charging"].state == "on")
                        return '4a9bf395-10da-4caf-b3db-2d17f19d2e6a';
                      else 
                        return 'd9ac4103-a603-4b4d-a4d7-4233b8d384ac';
                    ]]]
                styles:
                  card:
                    - background: |-
                        [[[ return `
                          center / cover no-repeat
                          url('https://api.danielfanica.com/assets/${variables.cover_img}')
                        `]]]
                    - background-size: 80%
                style: |
                  ha-card {
                    background-color: transparent;
                    border: none;
                    box-shadow: none;
                  }
          - type: vertical-stack
            cards:
              - type: custom:mushroom-template-card
                icon: mdi:lock
                icon_color: |
                  {% if is_state('lock.sonic_doors', 'unlocked') %}
                    red
                  {% else %}
                    green
                  {% endif %}
                layout: vertical
                fill_container: true
                entity: lock.sonic_doors
                primary: ''
                secondary: DOORS
                badge_color: ''
                style: |
                  ha-card {
                    position: relative;
                    background-color: transparent;
                    border: none;
                    box-shadow: none;
                    padding: 8px;
                  }
              - type: custom:mushroom-template-card
                icon: mdi:car-door
                icon_color: |
                  {% if is_state('cover.sonic_windows', 'open') %}
                    red
                  {% else %}
                    green
                  {% endif %}
                layout: vertical
                fill_container: true
                entity: cover.sonic_windows
                primary: ''
                secondary: WINDOWS
                badge_color: ''
                style: |
                  ha-card {
                    background-color: transparent;
                    border: none;
                    box-shadow: none;
                  }
              - type: custom:mushroom-template-card
                icon: mdi:progress-download
                icon_color: |
                  {% if is_state('update.sonic_software_update', 'off') %}
                    grey
                  {% else %}
                    green
                  {% endif %}
                layout: vertical
                fill_container: true
                entity: update.sonic_software_update
                tap_action:
                  action: more-info
                primary: ' '
                secondary: |
                  {% if is_state('update.sonic_software_update', 'off') %}
                    UP TO DATE
                  {% else %}
                    {{ states.update.sonic_software_update.attributes.latest_version }}
                  {% endif %}
                badge_color: ' '
                style: |
                  ha-card {
                    background-color: transparent;
                    border: none;
                    box-shadow: none;
                  }
      - type: horizontal-stack
        cards:
          - type: custom:gap-card
          - type: custom:gap-card
          - type: custom:mushroom-template-card
            icon: mdi:car
            icon_color: |
              {% if is_state('cover.sonic_trunk', 'open') %}
                red
              {% else %}
                grey
              {% endif %}
            layout: vertical
            fill_container: true
            entity: cover.sonic_trunk
            primary: ''
            secondary: TRUNK
            badge_color: ''
            style: |
              ha-card {
                background-color: transparent;
                border: none;
                box-shadow: none;
              }
          - type: custom:gap-card
          - type: custom:gap-card
